<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>SAE Auto: planner::Baseframe Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SAE Auto
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   <div id="projectbrief">TODO(roman):writebrief</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceplanner.html">planner</a></li><li class="navelem"><a class="el" href="classplanner_1_1_baseframe.html">Baseframe</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classplanner_1_1_baseframe-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">planner::Baseframe Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="classplanner_1_1_baseframe.html" title="Baseframe for the curvilinear coordinate system. ">Baseframe</a> for the curvilinear coordinate system.  
 <a href="classplanner_1_1_baseframe.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="baseframe_8h_source.html">baseframe.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aab9606fadb833533c0364c22a6cc17f4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplanner_1_1_baseframe.html#aab9606fadb833533c0364c22a6cc17f4">Baseframe</a> (const <a class="el" href="classplanner_1_1_map.html">Map</a> &amp;map)</td></tr>
<tr class="memdesc:aab9606fadb833533c0364c22a6cc17f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct baseframe from waypoints stored in a <a class="el" href="classplanner_1_1_map.html" title="Brief class description. ">Map</a>.  <a href="#aab9606fadb833533c0364c22a6cc17f4">More...</a><br /></td></tr>
<tr class="separator:aab9606fadb833533c0364c22a6cc17f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e6151c94194298fc006f06f6fa4a164"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplanner_1_1_baseframe.html#a5e6151c94194298fc006f06f6fa4a164">Baseframe</a> (const std::vector&lt; std::pair&lt; double, double &gt;&gt; &amp;wp)</td></tr>
<tr class="separator:a5e6151c94194298fc006f06f6fa4a164"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75a5ff0da6e0019cd220cacf5babaa3a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplanner_1_1_baseframe.html#a75a5ff0da6e0019cd220cacf5babaa3a">Baseframe</a> (const std::vector&lt; <a class="el" href="namespaceplanner.html#a00dc2e45d34fb5441af4d23fbde47b62">point</a> &gt; &amp;wp)</td></tr>
<tr class="separator:a75a5ff0da6e0019cd220cacf5babaa3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a039ed89d4c15884ec6d4c1f5a8c28714"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplanner_1_1_baseframe.html#a039ed89d4c15884ec6d4c1f5a8c28714">curvature</a> (const double s)</td></tr>
<tr class="memdesc:a039ed89d4c15884ec6d4c1f5a8c28714"><td class="mdescLeft">&#160;</td><td class="mdescRight">curvature of the baseframe at arc-length <img class="formulaInl" alt="$s$" src="form_3.png"/>.  <a href="#a039ed89d4c15884ec6d4c1f5a8c28714">More...</a><br /></td></tr>
<tr class="separator:a039ed89d4c15884ec6d4c1f5a8c28714"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c85586deaa4a398270c9b570f83bb70"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplanner_1_1_baseframe.html#a2c85586deaa4a398270c9b570f83bb70">theta</a> (const double s) const </td></tr>
<tr class="memdesc:a2c85586deaa4a398270c9b570f83bb70"><td class="mdescLeft">&#160;</td><td class="mdescRight">calculates the tangent angle in [rad] of baseframe at arc-length <img class="formulaInl" alt="$s$" src="form_3.png"/>.  <a href="#a2c85586deaa4a398270c9b570f83bb70">More...</a><br /></td></tr>
<tr class="separator:a2c85586deaa4a398270c9b570f83bb70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06b8160237873979ff10c9d89583afc2"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplanner_1_1_baseframe.html#a06b8160237873979ff10c9d89583afc2">length</a> () const </td></tr>
<tr class="memdesc:a06b8160237873979ff10c9d89583afc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">getter for length of the <a class="el" href="classplanner_1_1_baseframe.html" title="Baseframe for the curvilinear coordinate system. ">Baseframe</a> in [m].  <a href="#a06b8160237873979ff10c9d89583afc2">More...</a><br /></td></tr>
<tr class="separator:a06b8160237873979ff10c9d89583afc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d52902c2dab43b440eec809f45efdb1"><td class="memItemLeft" align="right" valign="top">std::pair&lt; double, double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplanner_1_1_baseframe.html#a9d52902c2dab43b440eec809f45efdb1">localize</a> (const <a class="el" href="namespaceplanner.html#a00dc2e45d34fb5441af4d23fbde47b62">point</a> position, const double velocity, const double heading, const double delta_t, const double last_known_s) const </td></tr>
<tr class="memdesc:a9d52902c2dab43b440eec809f45efdb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Localization of a vehicle in the curvilinear-coordinatesystem.  <a href="#a9d52902c2dab43b440eec809f45efdb1">More...</a><br /></td></tr>
<tr class="separator:a9d52902c2dab43b440eec809f45efdb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77f67bd3f400f9d0ac51f309b37cedc7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceplanner.html#a00dc2e45d34fb5441af4d23fbde47b62">point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplanner_1_1_baseframe.html#a77f67bd3f400f9d0ac51f309b37cedc7">P</a> (const double s) const </td></tr>
<tr class="memdesc:a77f67bd3f400f9d0ac51f309b37cedc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">2D-cubic-B-spline parametrized by <img class="formulaInl" alt="$s$" src="form_3.png"/>.  <a href="#a77f67bd3f400f9d0ac51f309b37cedc7">More...</a><br /></td></tr>
<tr class="separator:a77f67bd3f400f9d0ac51f309b37cedc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8804b52cdfa7d51f984299866a496c97"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceplanner.html#a00dc2e45d34fb5441af4d23fbde47b62">point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplanner_1_1_baseframe.html#a8804b52cdfa7d51f984299866a496c97">Q</a> (const double t) const </td></tr>
<tr class="memdesc:a8804b52cdfa7d51f984299866a496c97"><td class="mdescLeft">&#160;</td><td class="mdescRight">2D-cubic-B-spline parametrized by t.  <a href="#a8804b52cdfa7d51f984299866a496c97">More...</a><br /></td></tr>
<tr class="separator:a8804b52cdfa7d51f984299866a496c97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d085b127b40ada6841708daeb21ee41"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceplanner.html#a00dc2e45d34fb5441af4d23fbde47b62">point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplanner_1_1_baseframe.html#a3d085b127b40ada6841708daeb21ee41">Q_prime</a> (const double t) const </td></tr>
<tr class="memdesc:a3d085b127b40ada6841708daeb21ee41"><td class="mdescLeft">&#160;</td><td class="mdescRight">The first derivative of <img class="formulaInl" alt="$Q(t)$" src="form_19.png"/> w.r.t. <img class="formulaInl" alt="$t$" src="form_0.png"/>.  <a href="#a3d085b127b40ada6841708daeb21ee41">More...</a><br /></td></tr>
<tr class="separator:a3d085b127b40ada6841708daeb21ee41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93d019a928c054500f47f73d1e4928f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceplanner.html#a00dc2e45d34fb5441af4d23fbde47b62">point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplanner_1_1_baseframe.html#a93d019a928c054500f47f73d1e4928f4">Q_pprime</a> (const double t) const </td></tr>
<tr class="memdesc:a93d019a928c054500f47f73d1e4928f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The second derivative of <img class="formulaInl" alt="$Q(t)$" src="form_19.png"/> w.r.t. <img class="formulaInl" alt="$t$" src="form_0.png"/>.  <a href="#a93d019a928c054500f47f73d1e4928f4">More...</a><br /></td></tr>
<tr class="separator:a93d019a928c054500f47f73d1e4928f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840fab200ae5c89d66f3523899fa54cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceplanner.html#a00dc2e45d34fb5441af4d23fbde47b62">point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplanner_1_1_baseframe.html#a840fab200ae5c89d66f3523899fa54cc">P_prime</a> (const double s) const </td></tr>
<tr class="memdesc:a840fab200ae5c89d66f3523899fa54cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The first derivative of <img class="formulaInl" alt="$P(s)$" src="form_22.png"/> w.r.t. <img class="formulaInl" alt="$s$" src="form_3.png"/>.  <a href="#a840fab200ae5c89d66f3523899fa54cc">More...</a><br /></td></tr>
<tr class="separator:a840fab200ae5c89d66f3523899fa54cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac6c7dd33fc9dbc2737c4e5d40316d1a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceplanner.html#a00dc2e45d34fb5441af4d23fbde47b62">point</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplanner_1_1_baseframe.html#aac6c7dd33fc9dbc2737c4e5d40316d1a">P_pprime</a> (const double s) const </td></tr>
<tr class="memdesc:aac6c7dd33fc9dbc2737c4e5d40316d1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The second derivative of <img class="formulaInl" alt="$P(s)$" src="form_22.png"/> w.r.t. <img class="formulaInl" alt="$s$" src="form_3.png"/>.  <a href="#aac6c7dd33fc9dbc2737c4e5d40316d1a">More...</a><br /></td></tr>
<tr class="separator:aac6c7dd33fc9dbc2737c4e5d40316d1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78fce391fe97e9fc0ad615fbfe929726"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplanner_1_1_baseframe.html#a78fce391fe97e9fc0ad615fbfe929726">theta_P</a> (const double s) const </td></tr>
<tr class="memdesc:a78fce391fe97e9fc0ad615fbfe929726"><td class="mdescLeft">&#160;</td><td class="mdescRight">calculates the tangent angle in [rad] of baseframe at arc-length <img class="formulaInl" alt="$s$" src="form_3.png"/>.  <a href="#a78fce391fe97e9fc0ad615fbfe929726">More...</a><br /></td></tr>
<tr class="separator:a78fce391fe97e9fc0ad615fbfe929726"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a052d3a833cbcc586d53a93f9a2d92d2d"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplanner_1_1_baseframe.html#a052d3a833cbcc586d53a93f9a2d92d2d">theta_Q</a> (const double t) const </td></tr>
<tr class="memdesc:a052d3a833cbcc586d53a93f9a2d92d2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">calculates the tangent angle in [rad] of baseframe at <img class="formulaInl" alt="$t$" src="form_0.png"/>.  <a href="#a052d3a833cbcc586d53a93f9a2d92d2d">More...</a><br /></td></tr>
<tr class="separator:a052d3a833cbcc586d53a93f9a2d92d2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a605354ceb233f79341c41cb93e476f0f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplanner_1_1_baseframe.html#a605354ceb233f79341c41cb93e476f0f">init</a> (std::vector&lt; double &gt; vx, std::vector&lt; double &gt; vy)</td></tr>
<tr class="separator:a605354ceb233f79341c41cb93e476f0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16329795998c770bcd22580766f3e01c"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplanner_1_1_baseframe.html#a16329795998c770bcd22580766f3e01c">A</a> (const double t) const </td></tr>
<tr class="memdesc:a16329795998c770bcd22580766f3e01c"><td class="mdescLeft">&#160;</td><td class="mdescRight"><img class="formulaInl" alt="$ A: t \in [0,N] \rightarrow s \in [0,L] $" src="form_25.png"/>.  <a href="#a16329795998c770bcd22580766f3e01c">More...</a><br /></td></tr>
<tr class="separator:a16329795998c770bcd22580766f3e01c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2aed76b6f967270b47d8bc3a56a2dccb"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplanner_1_1_baseframe.html#a2aed76b6f967270b47d8bc3a56a2dccb">inv_A</a> (const double s) const </td></tr>
<tr class="memdesc:a2aed76b6f967270b47d8bc3a56a2dccb"><td class="mdescLeft">&#160;</td><td class="mdescRight"><img class="formulaInl" alt="$ A^{-1}: s \in [0,L] \rightarrow t \in [0,N] $" src="form_28.png"/>.  <a href="#a2aed76b6f967270b47d8bc3a56a2dccb">More...</a><br /></td></tr>
<tr class="separator:a2aed76b6f967270b47d8bc3a56a2dccb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:abddd2932d98540caa20145d913f04e9f"><td class="memItemLeft" align="right" valign="top">cubic_b_spline&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplanner_1_1_baseframe.html#abddd2932d98540caa20145d913f04e9f">_x</a></td></tr>
<tr class="memdesc:abddd2932d98540caa20145d913f04e9f"><td class="mdescLeft">&#160;</td><td class="mdescRight"><img class="formulaInl" alt="$x(t)$" src="form_30.png"/> where <img class="formulaInl" alt="$t \in [0,N]$" src="form_1.png"/>  <a href="#abddd2932d98540caa20145d913f04e9f">More...</a><br /></td></tr>
<tr class="separator:abddd2932d98540caa20145d913f04e9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d7de20f3acc1c3e0e58edf972d1cec2"><td class="memItemLeft" align="right" valign="top">cubic_b_spline&lt; double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplanner_1_1_baseframe.html#a4d7de20f3acc1c3e0e58edf972d1cec2">_y</a></td></tr>
<tr class="memdesc:a4d7de20f3acc1c3e0e58edf972d1cec2"><td class="mdescLeft">&#160;</td><td class="mdescRight"><img class="formulaInl" alt="$y(t)$" src="form_32.png"/> where <img class="formulaInl" alt="$t \in [0,N]$" src="form_1.png"/>  <a href="#a4d7de20f3acc1c3e0e58edf972d1cec2">More...</a><br /></td></tr>
<tr class="separator:a4d7de20f3acc1c3e0e58edf972d1cec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16b42ac15c7ddd7f5d30e1023b82c302"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplanner_1_1_baseframe.html#a16b42ac15c7ddd7f5d30e1023b82c302">_N</a></td></tr>
<tr class="memdesc:a16b42ac15c7ddd7f5d30e1023b82c302"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of waypoints <img class="formulaInl" alt="$N$" src="form_2.png"/>  <a href="#a16b42ac15c7ddd7f5d30e1023b82c302">More...</a><br /></td></tr>
<tr class="separator:a16b42ac15c7ddd7f5d30e1023b82c302"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classplanner_1_1_baseframe.html" title="Baseframe for the curvilinear coordinate system. ">Baseframe</a> for the curvilinear coordinate system. </p>
<dl class="section author"><dt>Author</dt><dd>Roman C. Podolski - <a href="#" onclick="location.href='mai'+'lto:'+'rom'+'an'+'.po'+'do'+'lsk'+'i@'+'tum'+'.d'+'e'; return false;">roman<span style="display: none;">.nosp@m.</span>.pod<span style="display: none;">.nosp@m.</span>olski<span style="display: none;">.nosp@m.</span>@tum<span style="display: none;">.nosp@m.</span>.de</a> </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classplanner_1_1_planner.html" title="A local path planner for autonomous driving. ">Planner</a>, <a class="el" href="classplanner_1_1_maneuver.html" title="A Maneuver describes a path in curvilinear- and carthesian coordinates. ">Maneuver</a>, <a href="https://en.wikipedia.org/wiki/B-spline">B-spline</a>, <a href="http://homepage.divms.uiowa.edu/~kearney/pubs/CurvesAndSurfacesArcLength.pdf">Wang2002</a>, <a href="http://homepage.divms.uiowa.edu/~kearney/pubs/CurvesAndSufacesClosestPoint.pdf">WangKearney2002</a></dd></dl>
<p>This provides the base for the curvilinear coordinatesystem in which the <a class="el" href="classplanner_1_1_planner.html" title="A local path planner for autonomous driving. ">Planner</a> generates Maneuvers. A parametric 2D-cubic-B-spline is employed to model the geometry of the road. It is assumed that a precise set of waypoints is given, trough which the baseframe passes. The baseframe is parametrizied by <img class="formulaInl" alt="$t$" src="form_0.png"/> where <img class="formulaInl" alt="$t \in [0,N]$" src="form_1.png"/> and <img class="formulaInl" alt="$N$" src="form_2.png"/> is the number of waypoints, or the arc-length <img class="formulaInl" alt="$s$" src="form_3.png"/> where <img class="formulaInl" alt="$s \in [0,L]$" src="form_4.png"/> and <img class="formulaInl" alt="$L$" src="form_5.png"/> is the lenght of the entire baseframe [<a href="http://homepage.divms.uiowa.edu/~kearney/pubs/CurvesAndSurfacesArcLength.pdf">Wang2002</a>]. </p>

<p>Definition at line <a class="el" href="baseframe_8h_source.html#l00068">68</a> of file <a class="el" href="baseframe_8h_source.html">baseframe.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aab9606fadb833533c0364c22a6cc17f4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">planner::Baseframe::Baseframe </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classplanner_1_1_map.html">Map</a> &amp;&#160;</td>
          <td class="paramname"><em>map</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct baseframe from waypoints stored in a <a class="el" href="classplanner_1_1_map.html" title="Brief class description. ">Map</a>. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classplanner_1_1_map.html" title="Brief class description. ">Map</a>, <a href="https://en.wikipedia.org/wiki/B-spline">B-spline</a>, <a href="http://www.boost.org/doc/libs/1_65_1/libs/math/doc/html/math_toolkit/interpolate/cubic_b.html.">boost::math::cubic_b_spline</a></dd></dl>
<p>Generates a 2D-B-spline from a set of waypoints stored in a map. The generated spline is implemented using <a href="http://www.boost.org/doc/libs/1_65_1/libs/math/doc/html/math_toolkit/interpolate/cubic_b.html.">boost::math::cubic_b_spline</a>. </p>

<p>Definition at line <a class="el" href="baseframe_8cc_source.html#l00029">29</a> of file <a class="el" href="baseframe_8cc_source.html">baseframe.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;                                   {</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> vx = map.get_waypoints_x();</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> vy = map.get_waypoints_y();</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <a class="code" href="classplanner_1_1_baseframe.html#a605354ceb233f79341c41cb93e476f0f">init</a>(vx, vy);</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;}</div><div class="ttc" id="classplanner_1_1_baseframe_html_a605354ceb233f79341c41cb93e476f0f"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a605354ceb233f79341c41cb93e476f0f">planner::Baseframe::init</a></div><div class="ttdeci">void init(std::vector&lt; double &gt; vx, std::vector&lt; double &gt; vy)</div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8cc_source.html#l00053">baseframe.cc:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5e6151c94194298fc006f06f6fa4a164"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">planner::Baseframe::Baseframe </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::pair&lt; double, double &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>wp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="baseframe_8cc_source.html#l00035">35</a> of file <a class="el" href="baseframe_8cc_source.html">baseframe.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;                                                                 {</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  std::vector&lt;double&gt; vx, vy;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;p : wp) {</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    vx.push_back(p.first);</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    vy.push_back(p.second);</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  }</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <a class="code" href="classplanner_1_1_baseframe.html#a605354ceb233f79341c41cb93e476f0f">init</a>(vx, vy);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;}</div><div class="ttc" id="classplanner_1_1_baseframe_html_a605354ceb233f79341c41cb93e476f0f"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a605354ceb233f79341c41cb93e476f0f">planner::Baseframe::init</a></div><div class="ttdeci">void init(std::vector&lt; double &gt; vx, std::vector&lt; double &gt; vy)</div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8cc_source.html#l00053">baseframe.cc:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a75a5ff0da6e0019cd220cacf5babaa3a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">planner::Baseframe::Baseframe </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="namespaceplanner.html#a00dc2e45d34fb5441af4d23fbde47b62">point</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>wp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="baseframe_8cc_source.html#l00044">44</a> of file <a class="el" href="baseframe_8cc_source.html">baseframe.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                                               {</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  std::vector&lt;double&gt; vx, vy;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;p : wp) {</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    vx.push_back(p.x());</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    vy.push_back(p.y());</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  }</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <a class="code" href="classplanner_1_1_baseframe.html#a605354ceb233f79341c41cb93e476f0f">init</a>(vx, vy);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;}</div><div class="ttc" id="classplanner_1_1_baseframe_html_a605354ceb233f79341c41cb93e476f0f"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a605354ceb233f79341c41cb93e476f0f">planner::Baseframe::init</a></div><div class="ttdeci">void init(std::vector&lt; double &gt; vx, std::vector&lt; double &gt; vy)</div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8cc_source.html#l00053">baseframe.cc:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a16329795998c770bcd22580766f3e01c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double planner::Baseframe::A </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><img class="formulaInl" alt="$ A: t \in [0,N] \rightarrow s \in [0,L] $" src="form_25.png"/>. </p>
<dl class="section see"><dt>See also</dt><dd><a href="http://homepage.divms.uiowa.edu/~kearney/pubs/CurvesAndSurfacesArcLength.pdf">Wang2002</a>, <a href="http://www.boost.org/doc/libs/1_65_1/libs/math/doc/html/math_toolkit/quadrature/trapezoidal.html">boost::math::quadrature::trapezoidal</a>, <a class="el" href="classplanner_1_1_baseframe.html#a2aed76b6f967270b47d8bc3a56a2dccb" title=". ">inv_A</a>. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>where <img class="formulaInl" alt="$t \in [0,N]$" src="form_1.png"/> and <img class="formulaInl" alt="$N$" src="form_2.png"/> is the number of waypoints. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>s where <img class="formulaInl" alt="$s \in [0,L]$" src="form_4.png"/> and <img class="formulaInl" alt="$L$" src="form_5.png"/> is the length of the baseframe. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::domain_error</td><td>if <img class="formulaInl" alt="$t \notin [0,N] $" src="form_17.png"/></td></tr>
  </table>
  </dd>
</dl>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ s = A(t) = \int^t_{t_0} \sqrt{((x'(t))^2 + (y'(t))^2)}\mathrm{d}t \]" src="form_26.png"/>
</p>
<p>The transformation function <img class="formulaInl" alt="$ A: t \in [0,N] \rightarrow s \in [0,L] $" src="form_25.png"/> maps from the parameter domain of waypoints to the parameter domain of the arc-length of the <a class="el" href="classplanner_1_1_baseframe.html" title="Baseframe for the curvilinear coordinate system. ">Baseframe</a>. The complexity of this function is <img class="formulaInl" alt="$\mathcal{O}(n\log(n))$" src="form_27.png"/> in computation time. This is archieved by saving previously calculated results in a static lookup table planner::_A_lut to avoid unnecessary computation. The numerical integration is implemented using <a href="http://www.boost.org/doc/libs/1_65_1/libs/math/doc/html/math_toolkit/quadrature/trapezoidal.html">boost::math::quadrature::trapezoidal</a>. </p>

<p>Definition at line <a class="el" href="baseframe_8cc_source.html#l00091">91</a> of file <a class="el" href="baseframe_8cc_source.html">baseframe.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                                        {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordflow">if</span> (t &lt; 0 || t &gt; <a class="code" href="classplanner_1_1_baseframe.html#a16b42ac15c7ddd7f5d30e1023b82c302">_N</a>)</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">throw</span> std::domain_error(<span class="stringliteral">&quot;t = &quot;</span> + std::to_string(t) +</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                            <span class="stringliteral">&quot; not within the domain [0,N]&quot;</span>);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">if</span> (_A_lut.find(t) != _A_lut.end()) {</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">return</span> _A_lut[t];</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  }</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordtype">double</span> result = 0.0;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordflow">if</span> (t == 0) <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keyword">auto</span> f = [<span class="keyword">this</span>](<span class="keywordtype">double</span> t) {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">return</span> sqrt(pow(<a class="code" href="classplanner_1_1_baseframe.html#abddd2932d98540caa20145d913f04e9f">_x</a>.prime(t), 2) + pow(<a class="code" href="classplanner_1_1_baseframe.html#a4d7de20f3acc1c3e0e58edf972d1cec2">_y</a>.prime(t), 2));</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  };</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  result = trapezoidal(f, 0.0, t);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  _A_lut[t] = result;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div><div class="ttc" id="classplanner_1_1_baseframe_html_a4d7de20f3acc1c3e0e58edf972d1cec2"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a4d7de20f3acc1c3e0e58edf972d1cec2">planner::Baseframe::_y</a></div><div class="ttdeci">cubic_b_spline&lt; double &gt; _y</div><div class="ttdoc"> where  </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00407">baseframe.h:407</a></div></div>
<div class="ttc" id="classplanner_1_1_baseframe_html_abddd2932d98540caa20145d913f04e9f"><div class="ttname"><a href="classplanner_1_1_baseframe.html#abddd2932d98540caa20145d913f04e9f">planner::Baseframe::_x</a></div><div class="ttdeci">cubic_b_spline&lt; double &gt; _x</div><div class="ttdoc"> where  </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00399">baseframe.h:399</a></div></div>
<div class="ttc" id="classplanner_1_1_baseframe_html_a16b42ac15c7ddd7f5d30e1023b82c302"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a16b42ac15c7ddd7f5d30e1023b82c302">planner::Baseframe::_N</a></div><div class="ttdeci">int _N</div><div class="ttdoc">number of waypoints  </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00412">baseframe.h:412</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a039ed89d4c15884ec6d4c1f5a8c28714"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double planner::Baseframe::curvature </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>curvature of the baseframe at arc-length <img class="formulaInl" alt="$s$" src="form_3.png"/>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>where <img class="formulaInl" alt="$s \in [0,L]$" src="form_4.png"/> and <img class="formulaInl" alt="$L$" src="form_5.png"/> is the length of the baseframe in [m]. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classplanner_1_1_baseframe.html#a840fab200ae5c89d66f3523899fa54cc" title="The first derivative of  w.r.t. . ">P_prime</a>, <a class="el" href="classplanner_1_1_baseframe.html#aac6c7dd33fc9dbc2737c4e5d40316d1a" title="The second derivative of  w.r.t. . ">P_pprime</a>, <a href="https://en.wikipedia.org/wiki/Curvature">Curvature</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>curvature of the baseframe at arc-length <img class="formulaInl" alt="$s$" src="form_3.png"/>. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::domain_error</td><td>if <img class="formulaInl" alt="$s \notin [0,L] $" src="form_6.png"/>.</td></tr>
  </table>
  </dd>
</dl>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ \kappa_b = \frac{x'y'' - x''y'}{(x'^2+y'^2)^\frac{3}{2}} \]" src="form_7.png"/>
</p>
<p>The curvature of the baseframe at arc-length <img class="formulaInl" alt="$s$" src="form_3.png"/> where <img class="formulaInl" alt="$s \in [0,L]$" src="form_4.png"/> and <img class="formulaInl" alt="$L$" src="form_5.png"/> is the length of the baseframe in [m], can be calulated from the first and second derivatices of the cubic-B-spline. For a definition of curvature in this sense please refere to <a href="https://en.wikipedia.org/wiki/Curvature">Curvature</a>. </p>

<p>Definition at line <a class="el" href="baseframe_8cc_source.html#l00143">143</a> of file <a class="el" href="baseframe_8cc_source.html">baseframe.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                                          {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">if</span> (_curvature_lut.find(s) != _curvature_lut.end()) {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">return</span> _curvature_lut[s];</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> d_P = <a class="code" href="classplanner_1_1_baseframe.html#a840fab200ae5c89d66f3523899fa54cc">P_prime</a>(s);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordtype">double</span> d_x = d_P.x();</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keywordtype">double</span> d_y = d_P.y();</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordflow">if</span> (d_x == 0.0 &amp;&amp; d_y == 0.0) {  <span class="comment">// avoid division by 0.0</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    d_x = std::numeric_limits&lt;double&gt;::denorm_min();</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    d_y = std::numeric_limits&lt;double&gt;::denorm_min();</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> dd_P = <a class="code" href="classplanner_1_1_baseframe.html#aac6c7dd33fc9dbc2737c4e5d40316d1a">P_pprime</a>(s);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> dd_x = dd_P.x();</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> dd_y = dd_P.y();</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> kappa =</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      (d_x * dd_y - dd_x * d_y) / pow((pow(d_x, 2) + pow(d_y, 2)), 3.0 / 2.0);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  _curvature_lut[s] = kappa;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keywordflow">return</span> kappa;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;}</div><div class="ttc" id="classplanner_1_1_baseframe_html_aac6c7dd33fc9dbc2737c4e5d40316d1a"><div class="ttname"><a href="classplanner_1_1_baseframe.html#aac6c7dd33fc9dbc2737c4e5d40316d1a">planner::Baseframe::P_pprime</a></div><div class="ttdeci">point P_pprime(const double s) const </div><div class="ttdoc">The second derivative of  w.r.t. . </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00303">baseframe.h:303</a></div></div>
<div class="ttc" id="classplanner_1_1_baseframe_html_a840fab200ae5c89d66f3523899fa54cc"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a840fab200ae5c89d66f3523899fa54cc">planner::Baseframe::P_prime</a></div><div class="ttdeci">point P_prime(const double s) const </div><div class="ttdoc">The first derivative of  w.r.t. . </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00285">baseframe.h:285</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a605354ceb233f79341c41cb93e476f0f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void planner::Baseframe::init </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; double &gt;&#160;</td>
          <td class="paramname"><em>vx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; double &gt;&#160;</td>
          <td class="paramname"><em>vy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="baseframe_8cc_source.html#l00053">53</a> of file <a class="el" href="baseframe_8cc_source.html">baseframe.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                                                 {</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  CHECK_EQ(vx.size(), vy.size());</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="classplanner_1_1_baseframe.html#a16b42ac15c7ddd7f5d30e1023b82c302">_N</a> = vx.size() - 1;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <a class="code" href="classplanner_1_1_baseframe.html#abddd2932d98540caa20145d913f04e9f">_x</a> = cubic_b_spline&lt;double&gt;(vx.begin(), vx.end(), 0, 1.0);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="classplanner_1_1_baseframe.html#a4d7de20f3acc1c3e0e58edf972d1cec2">_y</a> = cubic_b_spline&lt;double&gt;(vy.begin(), vy.end(), 0, 1.0);</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div><div class="ttc" id="classplanner_1_1_baseframe_html_a4d7de20f3acc1c3e0e58edf972d1cec2"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a4d7de20f3acc1c3e0e58edf972d1cec2">planner::Baseframe::_y</a></div><div class="ttdeci">cubic_b_spline&lt; double &gt; _y</div><div class="ttdoc"> where  </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00407">baseframe.h:407</a></div></div>
<div class="ttc" id="classplanner_1_1_baseframe_html_abddd2932d98540caa20145d913f04e9f"><div class="ttname"><a href="classplanner_1_1_baseframe.html#abddd2932d98540caa20145d913f04e9f">planner::Baseframe::_x</a></div><div class="ttdeci">cubic_b_spline&lt; double &gt; _x</div><div class="ttdoc"> where  </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00399">baseframe.h:399</a></div></div>
<div class="ttc" id="classplanner_1_1_baseframe_html_a16b42ac15c7ddd7f5d30e1023b82c302"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a16b42ac15c7ddd7f5d30e1023b82c302">planner::Baseframe::_N</a></div><div class="ttdeci">int _N</div><div class="ttdoc">number of waypoints  </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00412">baseframe.h:412</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2aed76b6f967270b47d8bc3a56a2dccb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double planner::Baseframe::inv_A </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><img class="formulaInl" alt="$ A^{-1}: s \in [0,L] \rightarrow t \in [0,N] $" src="form_28.png"/>. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classplanner_1_1_baseframe.html#a16329795998c770bcd22580766f3e01c" title=". ">A</a>, <a href="http://homepage.divms.uiowa.edu/~kearney/pubs/CurvesAndSurfacesArcLength.pdf">Wang2002</a>, <a href="http://www.boost.org/doc/libs/1_65_1/libs/math/doc/html/math_toolkit/roots/roots_noderiv.html">boost::math::tools::roots</a>, <a href="https://en.wikipedia.org/wiki/Bisection_method">bisection method</a>. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>where <img class="formulaInl" alt="$s \in [0,L]$" src="form_4.png"/> and <img class="formulaInl" alt="$L$" src="form_5.png"/> is the length of the baseframe. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>t where <img class="formulaInl" alt="$t \in [0,N]$" src="form_1.png"/> and <img class="formulaInl" alt="$N$" src="form_2.png"/> is the number of waypoints. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::domain_error</td><td>if <img class="formulaInl" alt="$t \notin [0,N] $" src="form_17.png"/>.</td></tr>
  </table>
  </dd>
</dl>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ t = A^{-1}(s) \]" src="form_29.png"/>
</p>
<p>The transformation function <img class="formulaInl" alt="$ A^{-1}: s \in [0,L] \rightarrow t \in [0,N] $" src="form_28.png"/> maps from the parameter domain of the arc-length of the <a class="el" href="classplanner_1_1_baseframe.html" title="Baseframe for the curvilinear coordinate system. ">Baseframe</a> to the parameter domain of waypoints. This is the inverse function of A. The complexity of this function is <img class="formulaInl" alt="$\mathcal{O}(n\log(n))$" src="form_27.png"/> in computation time. This is archieved by saving previously calculated results in a static lookup table planner::_A_inv_lut to avoid unnecessary computation. Since an analytical solution of the inverse function is nor needed or feasible, a numerical root finding algorithm from <a href="http://www.boost.org/doc/libs/1_65_1/libs/math/doc/html/math_toolkit/roots/roots_noderiv.html">boost::math::tools::roots</a> is used. Because of its robustness, the <a href="https://en.wikipedia.org/wiki/Bisection_method">bisection method</a> was choosen. </p>

<p>Definition at line <a class="el" href="baseframe_8cc_source.html#l00114">114</a> of file <a class="el" href="baseframe_8cc_source.html">baseframe.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                            {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="keywordflow">if</span> (s &lt; 0 || s &gt; <a class="code" href="classplanner_1_1_baseframe.html#a06b8160237873979ff10c9d89583afc2">length</a>())</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">throw</span> std::domain_error(<span class="stringliteral">&quot;s = &quot;</span> + std::to_string(s) +</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                            <span class="stringliteral">&quot; not within the domain [0,L]&quot;</span>);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordflow">if</span> (_segment_lut.empty()) {</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> t = 0; t &lt; <a class="code" href="classplanner_1_1_baseframe.html#a16b42ac15c7ddd7f5d30e1023b82c302">_N</a>; ++t) {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      _segment_lut.push_back(<a class="code" href="classplanner_1_1_baseframe.html#a16329795998c770bcd22580766f3e01c">A</a>(t));</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    }</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  }</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">if</span> (_inv_A_lut.find(s) != _inv_A_lut.end()) {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">return</span> _inv_A_lut[s];</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  }</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  std::uintmax_t iterations = 1000;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keyword">auto</span> low = std::lower_bound(_segment_lut.begin(), _segment_lut.end(), s);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> segment = low - _segment_lut.begin();</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordtype">double</span> result = 0.0;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  result = bisect([<span class="keyword">this</span>, s](<span class="keywordtype">double</span> t) { <span class="keywordflow">return</span> <a class="code" href="classplanner_1_1_baseframe.html#a16329795998c770bcd22580766f3e01c">A</a>(t) - s; }, segment - 1,</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                  segment, eps_tolerance&lt;float&gt;(), iterations)</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;               .first;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  _inv_A_lut[s] = result;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;}</div><div class="ttc" id="classplanner_1_1_baseframe_html_a16329795998c770bcd22580766f3e01c"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a16329795998c770bcd22580766f3e01c">planner::Baseframe::A</a></div><div class="ttdeci">double A(const double t) const </div><div class="ttdoc">. </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8cc_source.html#l00091">baseframe.cc:91</a></div></div>
<div class="ttc" id="classplanner_1_1_baseframe_html_a16b42ac15c7ddd7f5d30e1023b82c302"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a16b42ac15c7ddd7f5d30e1023b82c302">planner::Baseframe::_N</a></div><div class="ttdeci">int _N</div><div class="ttdoc">number of waypoints  </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00412">baseframe.h:412</a></div></div>
<div class="ttc" id="classplanner_1_1_baseframe_html_a06b8160237873979ff10c9d89583afc2"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a06b8160237873979ff10c9d89583afc2">planner::Baseframe::length</a></div><div class="ttdeci">double length() const </div><div class="ttdoc">getter for length of the Baseframe in [m]. </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00138">baseframe.h:138</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a06b8160237873979ff10c9d89583afc2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double planner::Baseframe::length </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>getter for length of the <a class="el" href="classplanner_1_1_baseframe.html" title="Baseframe for the curvilinear coordinate system. ">Baseframe</a> in [m]. </p>
<dl class="section return"><dt>Returns</dt><dd>length of the <a class="el" href="classplanner_1_1_baseframe.html" title="Baseframe for the curvilinear coordinate system. ">Baseframe</a> in [m].</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classplanner_1_1_baseframe.html#a16329795998c770bcd22580766f3e01c" title=". ">A</a>, <a class="el" href="classplanner_1_1_baseframe.html#a16b42ac15c7ddd7f5d30e1023b82c302" title="number of waypoints  ">_N</a>, <a href="http://homepage.divms.uiowa.edu/~kearney/pubs/CurvesAndSurfacesArcLength.pdf">Wang2002</a></dd></dl>
<p>This is equal to calculating </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[A(N)\]" src="form_11.png"/>
</p>
<p>where <img class="formulaInl" alt="$A(\cdot)$" src="form_12.png"/> is the non-linear transformation from the parameter space of <img class="formulaInl" alt="$t$" src="form_0.png"/> to <img class="formulaInl" alt="$s$" src="form_3.png"/>, and N is the number of waypoints and therefore the last waypoint. This calculation yields the arc-length at the last waypoint and therefore the length of the entire curve. </p>

<p>Definition at line <a class="el" href="baseframe_8h_source.html#l00138">138</a> of file <a class="el" href="baseframe_8h_source.html">baseframe.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classplanner_1_1_baseframe.html#a16329795998c770bcd22580766f3e01c">A</a>(<a class="code" href="classplanner_1_1_baseframe.html#a16b42ac15c7ddd7f5d30e1023b82c302">_N</a>); }</div><div class="ttc" id="classplanner_1_1_baseframe_html_a16329795998c770bcd22580766f3e01c"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a16329795998c770bcd22580766f3e01c">planner::Baseframe::A</a></div><div class="ttdeci">double A(const double t) const </div><div class="ttdoc">. </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8cc_source.html#l00091">baseframe.cc:91</a></div></div>
<div class="ttc" id="classplanner_1_1_baseframe_html_a16b42ac15c7ddd7f5d30e1023b82c302"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a16b42ac15c7ddd7f5d30e1023b82c302">planner::Baseframe::_N</a></div><div class="ttdeci">int _N</div><div class="ttdoc">number of waypoints  </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00412">baseframe.h:412</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9d52902c2dab43b440eec809f45efdb1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; double, double &gt; planner::Baseframe::localize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceplanner.html#a00dc2e45d34fb5441af4d23fbde47b62">point</a>&#160;</td>
          <td class="paramname"><em>position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>velocity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>heading</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>delta_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>last_known_s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Localization of a vehicle in the curvilinear-coordinatesystem. </p>
<dl class="section see"><dt>See also</dt><dd><a href="http://homepage.divms.uiowa.edu/~kearney/pubs/CurvesAndSufacesClosestPoint.pdf">WangKearney2002</a>, <a href="http://www.boost.org/doc/libs/1_65_1/libs/math/doc/html/math_toolkit/roots.html">boost::math::tools::roots</a>, <a href="http://www.boost.org/doc/libs/1_65_1/libs/math/doc/html/math_toolkit/roots/roots_deriv.html">boost::math::tools::roots::newton_raphson_iterate</a>, <a href="http://www.boost.org/doc/libs/1_65_1/libs/geometry/doc/html/geometry/reference/algorithms/distance/distance_2.html">boost::geometry</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>std::pair containing the position of the vehicle in curvilinear coordinates - first is arc-length <img class="formulaInl" alt="$s$" src="form_3.png"/> along the baseframe and second is the offset from the baseframe <img class="formulaInl" alt="$q$" src="form_13.png"/>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">position</td><td>position of the vehicle in Carthesian coordinates [m]. </td></tr>
    <tr><td class="paramname">velocity</td><td>of the vehicle [m/s]. </td></tr>
    <tr><td class="paramname">heading</td><td>of the vehicle [rad]. </td></tr>
    <tr><td class="paramname">delta_t</td><td>time difference from the last call to <a class="el" href="classplanner_1_1_planner.html#a4e65a6e98c7f907d06d467760f6e0ed3" title="Compute a path that minimizes the cost function Maneuver::J. ">Planner::update</a> [s]. </td></tr>
    <tr><td class="paramname">last_known_s</td><td>the last known vehicle location on the baseframe [m].</td></tr>
  </table>
  </dd>
</dl>
<p>Localizing a vehicle in the curvilinear coordinatesystem is equal to minimizing the squared distance between the vehilce posistion and the baseframe w.r.t the arc-length <img class="formulaInl" alt="$s$" src="form_3.png"/>.</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[\min_{s \in [0,L]} d(s) = (x_v - x(t))^2 + (y_v - y(t))^2\]" src="form_14.png"/>
</p>
<p>this is equal to finding the root of the function</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[\frac{\mathrm{d}}{\mathrm{d}s}d(s) = 2(x_v - x(t))x'(t) + 2(y_v - y(t))y'(t)\]" src="form_15.png"/>
</p>
<p>This can be archieved with any root finding algorithm. <a href="http://www.boost.org/doc/libs/1_65_1/libs/math/doc/html/math_toolkit/roots.html">boost::math::tools::roots</a> implements a number of possible choises. However, because fast convergence is a criterium for the localisation, <a href="https://en.wikipedia.org/wiki/Newton%27s_method">Newton-Raphson</a> is the algorithm of choise in this scenario. The performance of the root-finding algortihm is highly-depentend on the initial guess for the root and the boundaries in which the algorihmn searches for the root. Therefore this implementation tries to guess where the vehicle might be in curvilinear coordinates, based on its current velocity, last known position in cuvilinear coordinates and time past since last update.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>This implementation can be improoved by providing a choise for the rootfinding algorithm and/or implementing a robust and realtime capable solution as described in <a href="http://ieeexplore.ieee.org/document/4722219/">Xu2008</a>.</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>improve the initial guess for the rootfinding algortihm - delta_t can propably omitted.</dd></dl>

<p>Definition at line <a class="el" href="baseframe_8cc_source.html#l00170">170</a> of file <a class="el" href="baseframe_8cc_source.html">baseframe.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                                                                               {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keyword">auto</span> D_prime = [ <span class="keyword">this</span>, x_0 = position.x(), y_0 = position.y() ](<span class="keywordtype">double</span> s) {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keyword">auto</span> p = <a class="code" href="classplanner_1_1_baseframe.html#a77f67bd3f400f9d0ac51f309b37cedc7">P</a>(s);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordtype">double</span> x = p.x();</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordtype">double</span> y = p.y();</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keyword">auto</span> p_prime = <a class="code" href="classplanner_1_1_baseframe.html#a840fab200ae5c89d66f3523899fa54cc">P_prime</a>(s);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordtype">double</span> x_prime = p_prime.x();</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordtype">double</span> y_prime = p_prime.y();</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keyword">auto</span> p_pprime = <a class="code" href="classplanner_1_1_baseframe.html#aac6c7dd33fc9dbc2737c4e5d40316d1a">P_pprime</a>(s);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordtype">double</span> x_pprime = p_pprime.x();</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordtype">double</span> y_pprime = p_pprime.y();</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordtype">double</span> dist_prime = 2 * (x - x_0) * x_prime + 2 * (y - y_0) * y_prime;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordtype">double</span> dist_pprime = 2 * ((x - x_0) * x_pprime + pow(x_prime, 2) +</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                              (y - y_0) * y_pprime + pow(y_prime, 2));</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">return</span> std::pair&lt;double, double&gt;(dist_prime, dist_pprime);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  };</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  std::uintmax_t iterations = 1000;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keywordtype">double</span> minimum_extra_offset = 10;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="keywordtype">double</span> lower_barrier = last_known_s - minimum_extra_offset;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keywordflow">if</span> (lower_barrier &lt;= 0.0) lower_barrier = 0.0;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordtype">double</span> initial_guess = last_known_s + v * dt;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="keywordflow">if</span> (initial_guess &gt; <a class="code" href="classplanner_1_1_baseframe.html#a06b8160237873979ff10c9d89583afc2">length</a>()) initial_guess = <a class="code" href="classplanner_1_1_baseframe.html#a06b8160237873979ff10c9d89583afc2">length</a>();</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordtype">double</span> upper_barrier = initial_guess + minimum_extra_offset;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordflow">if</span> (upper_barrier &gt; <a class="code" href="classplanner_1_1_baseframe.html#a06b8160237873979ff10c9d89583afc2">length</a>()) upper_barrier = <a class="code" href="classplanner_1_1_baseframe.html#a06b8160237873979ff10c9d89583afc2">length</a>();</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keyword">auto</span> result = newton_raphson_iterate(</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      D_prime, lower_barrier, initial_guess, upper_barrier,</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      std::numeric_limits&lt;double&gt;::digits / 2, iterations);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="keyword">auto</span> p = <a class="code" href="classplanner_1_1_baseframe.html#a77f67bd3f400f9d0ac51f309b37cedc7">P</a>(result);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordflow">return</span> std::pair&lt;double, double&gt;(result, bg::distance(p, position));</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;}</div><div class="ttc" id="classplanner_1_1_baseframe_html_a77f67bd3f400f9d0ac51f309b37cedc7"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a77f67bd3f400f9d0ac51f309b37cedc7">planner::Baseframe::P</a></div><div class="ttdeci">point P(const double s) const </div><div class="ttdoc">2D-cubic-B-spline parametrized by . </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00212">baseframe.h:212</a></div></div>
<div class="ttc" id="classplanner_1_1_baseframe_html_aac6c7dd33fc9dbc2737c4e5d40316d1a"><div class="ttname"><a href="classplanner_1_1_baseframe.html#aac6c7dd33fc9dbc2737c4e5d40316d1a">planner::Baseframe::P_pprime</a></div><div class="ttdeci">point P_pprime(const double s) const </div><div class="ttdoc">The second derivative of  w.r.t. . </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00303">baseframe.h:303</a></div></div>
<div class="ttc" id="classplanner_1_1_baseframe_html_a840fab200ae5c89d66f3523899fa54cc"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a840fab200ae5c89d66f3523899fa54cc">planner::Baseframe::P_prime</a></div><div class="ttdeci">point P_prime(const double s) const </div><div class="ttdoc">The first derivative of  w.r.t. . </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00285">baseframe.h:285</a></div></div>
<div class="ttc" id="classplanner_1_1_baseframe_html_a06b8160237873979ff10c9d89583afc2"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a06b8160237873979ff10c9d89583afc2">planner::Baseframe::length</a></div><div class="ttdeci">double length() const </div><div class="ttdoc">getter for length of the Baseframe in [m]. </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00138">baseframe.h:138</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a77f67bd3f400f9d0ac51f309b37cedc7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceplanner.html#a00dc2e45d34fb5441af4d23fbde47b62">point</a> planner::Baseframe::P </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>2D-cubic-B-spline parametrized by <img class="formulaInl" alt="$s$" src="form_3.png"/>. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classplanner_1_1_baseframe.html#a8804b52cdfa7d51f984299866a496c97" title="2D-cubic-B-spline parametrized by t. ">Q</a>, <a class="el" href="classplanner_1_1_baseframe.html#a2aed76b6f967270b47d8bc3a56a2dccb" title=". ">inv_A</a>, <a href="http://homepage.divms.uiowa.edu/~kearney/pubs/CurvesAndSurfacesArcLength.pdf">Wang2002</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>where <img class="formulaInl" alt="$s \in [0,L]$" src="form_4.png"/> and <img class="formulaInl" alt="$L$" src="form_5.png"/> is the total length of the baseframe in [m]. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::domain_error</td><td>if <img class="formulaInl" alt="$s \notin [0,L] $" src="form_6.png"/>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A point on the <a class="el" href="classplanner_1_1_baseframe.html" title="Baseframe for the curvilinear coordinate system. ">Baseframe</a> in Carthesian coordinates [m].</dd></dl>
<p>A parametric representation of a cubic spline curve.</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ P(s) = Q(A^{-1}) = (x(A^{-1}),y(A^{-1}))\]" src="form_16.png"/>
</p>
<p>where <img class="formulaInl" alt="$s \in [0,L]$" src="form_4.png"/> and <img class="formulaInl" alt="$L$" src="form_5.png"/> is the total length of the baseframe in [m]. </p>

<p>Definition at line <a class="el" href="baseframe_8h_source.html#l00212">212</a> of file <a class="el" href="baseframe_8h_source.html">baseframe.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classplanner_1_1_baseframe.html#a8804b52cdfa7d51f984299866a496c97">Q</a>(<a class="code" href="classplanner_1_1_baseframe.html#a2aed76b6f967270b47d8bc3a56a2dccb">inv_A</a>(s)); }</div><div class="ttc" id="classplanner_1_1_baseframe_html_a8804b52cdfa7d51f984299866a496c97"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a8804b52cdfa7d51f984299866a496c97">planner::Baseframe::Q</a></div><div class="ttdeci">point Q(const double t) const </div><div class="ttdoc">2D-cubic-B-spline parametrized by t. </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8cc_source.html#l00061">baseframe.cc:61</a></div></div>
<div class="ttc" id="classplanner_1_1_baseframe_html_a2aed76b6f967270b47d8bc3a56a2dccb"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a2aed76b6f967270b47d8bc3a56a2dccb">planner::Baseframe::inv_A</a></div><div class="ttdeci">double inv_A(const double s) const </div><div class="ttdoc">. </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8cc_source.html#l00114">baseframe.cc:114</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aac6c7dd33fc9dbc2737c4e5d40316d1a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceplanner.html#a00dc2e45d34fb5441af4d23fbde47b62">point</a> planner::Baseframe::P_pprime </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The second derivative of <img class="formulaInl" alt="$P(s)$" src="form_22.png"/> w.r.t. <img class="formulaInl" alt="$s$" src="form_3.png"/>. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classplanner_1_1_baseframe.html#a93d019a928c054500f47f73d1e4928f4" title="The second derivative of  w.r.t. . ">Q_pprime</a>, <a class="el" href="classplanner_1_1_baseframe.html#a2aed76b6f967270b47d8bc3a56a2dccb" title=". ">inv_A</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>where <img class="formulaInl" alt="$s \in [0,L]$" src="form_4.png"/> and <img class="formulaInl" alt="$L$" src="form_5.png"/> is the total length of the baseframe in [m]. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::domain_error</td><td>if <img class="formulaInl" alt="$s \notin [0,L] $" src="form_6.png"/>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the second derivate of <img class="formulaInl" alt="$P(s)$" src="form_22.png"/> w.r.t s.</dd></dl>
<p>The derivate can be easily calculated by transforming the parameter domain to <img class="formulaInl" alt="$t$" src="form_0.png"/>.</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[\frac{\mathrm{d}^2}{\mathrm{d}s^2}P(s)= \frac{\mathrm{d}^2}{\mathrm{d}t^2}Q(A^{-1}(s))\]" src="form_24.png"/>
</p>
<p>where <img class="formulaInl" alt="$s \in [0,L]$" src="form_4.png"/> and <img class="formulaInl" alt="$L$" src="form_5.png"/> is the total length of the baseframe in [m]. </p>

<p>Definition at line <a class="el" href="baseframe_8h_source.html#l00303">303</a> of file <a class="el" href="baseframe_8h_source.html">baseframe.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classplanner_1_1_baseframe.html#a93d019a928c054500f47f73d1e4928f4">Q_pprime</a>(<a class="code" href="classplanner_1_1_baseframe.html#a2aed76b6f967270b47d8bc3a56a2dccb">inv_A</a>(s)); }</div><div class="ttc" id="classplanner_1_1_baseframe_html_a93d019a928c054500f47f73d1e4928f4"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a93d019a928c054500f47f73d1e4928f4">planner::Baseframe::Q_pprime</a></div><div class="ttdeci">point Q_pprime(const double t) const </div><div class="ttdoc">The second derivative of  w.r.t. . </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8cc_source.html#l00075">baseframe.cc:75</a></div></div>
<div class="ttc" id="classplanner_1_1_baseframe_html_a2aed76b6f967270b47d8bc3a56a2dccb"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a2aed76b6f967270b47d8bc3a56a2dccb">planner::Baseframe::inv_A</a></div><div class="ttdeci">double inv_A(const double s) const </div><div class="ttdoc">. </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8cc_source.html#l00114">baseframe.cc:114</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a840fab200ae5c89d66f3523899fa54cc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceplanner.html#a00dc2e45d34fb5441af4d23fbde47b62">point</a> planner::Baseframe::P_prime </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The first derivative of <img class="formulaInl" alt="$P(s)$" src="form_22.png"/> w.r.t. <img class="formulaInl" alt="$s$" src="form_3.png"/>. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classplanner_1_1_baseframe.html#a3d085b127b40ada6841708daeb21ee41" title="The first derivative of  w.r.t. . ">Q_prime</a>, <a class="el" href="classplanner_1_1_baseframe.html#a2aed76b6f967270b47d8bc3a56a2dccb" title=". ">inv_A</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>where <img class="formulaInl" alt="$s \in [0,L]$" src="form_4.png"/> and <img class="formulaInl" alt="$L$" src="form_5.png"/> is the total length of the baseframe in [m]. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::domain_error</td><td>if <img class="formulaInl" alt="$s \notin [0,L] $" src="form_6.png"/>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the first derivate of <img class="formulaInl" alt="$P(s)$" src="form_22.png"/> w.r.t s.</dd></dl>
<p>The derivate can be easily calculated by transforming the parameter domain to <img class="formulaInl" alt="$t$" src="form_0.png"/>.</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[\frac{\mathrm{d}}{\mathrm{d}s}P(s)= \frac{\mathrm{d}}{\mathrm{d}t}Q(A^{-1}(s))\]" src="form_23.png"/>
</p>
<p>where <img class="formulaInl" alt="$s \in [0,L]$" src="form_4.png"/> and <img class="formulaInl" alt="$L$" src="form_5.png"/> is the total length of the baseframe in [m]. This is the tangent of the baseframe at arc-length <img class="formulaInl" alt="$s$" src="form_3.png"/>. </p>

<p>Definition at line <a class="el" href="baseframe_8h_source.html#l00285">285</a> of file <a class="el" href="baseframe_8h_source.html">baseframe.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classplanner_1_1_baseframe.html#a3d085b127b40ada6841708daeb21ee41">Q_prime</a>(<a class="code" href="classplanner_1_1_baseframe.html#a2aed76b6f967270b47d8bc3a56a2dccb">inv_A</a>(s)); }</div><div class="ttc" id="classplanner_1_1_baseframe_html_a3d085b127b40ada6841708daeb21ee41"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a3d085b127b40ada6841708daeb21ee41">planner::Baseframe::Q_prime</a></div><div class="ttdeci">point Q_prime(const double t) const </div><div class="ttdoc">The first derivative of  w.r.t. . </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8cc_source.html#l00068">baseframe.cc:68</a></div></div>
<div class="ttc" id="classplanner_1_1_baseframe_html_a2aed76b6f967270b47d8bc3a56a2dccb"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a2aed76b6f967270b47d8bc3a56a2dccb">planner::Baseframe::inv_A</a></div><div class="ttdeci">double inv_A(const double s) const </div><div class="ttdoc">. </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8cc_source.html#l00114">baseframe.cc:114</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8804b52cdfa7d51f984299866a496c97"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceplanner.html#a00dc2e45d34fb5441af4d23fbde47b62">point</a> planner::Baseframe::Q </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>2D-cubic-B-spline parametrized by t. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classplanner_1_1_baseframe.html#a77f67bd3f400f9d0ac51f309b37cedc7" title="2D-cubic-B-spline parametrized by . ">P</a>, <a href="https://en.wikipedia.org/wiki/B-spline">B-Spline</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>where <img class="formulaInl" alt="$t \in [0,N]$" src="form_1.png"/> and <img class="formulaInl" alt="$N$" src="form_2.png"/> is the number of waypoints. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A point on the <a class="el" href="classplanner_1_1_baseframe.html" title="Baseframe for the curvilinear coordinate system. ">Baseframe</a> in Carthesian coordinates [m]. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::domain_error</td><td>if <img class="formulaInl" alt="$t \notin [0,N] $" src="form_17.png"/>.</td></tr>
  </table>
  </dd>
</dl>
<p>A parametric representation of a cubic spline curve.</p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ Q(t) = (x(t), y(t)) \]" src="form_18.png"/>
</p>
<p>where <img class="formulaInl" alt="$t \in [0,N]$" src="form_1.png"/> and <img class="formulaInl" alt="$N$" src="form_2.png"/> is the number of waypoints. </p>

<p>Definition at line <a class="el" href="baseframe_8cc_source.html#l00061">61</a> of file <a class="el" href="baseframe_8cc_source.html">baseframe.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                                       {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keywordflow">if</span> (t &lt; 0 || t &gt; <a class="code" href="classplanner_1_1_baseframe.html#a16b42ac15c7ddd7f5d30e1023b82c302">_N</a>)</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">throw</span> std::domain_error(<span class="stringliteral">&quot;t = &quot;</span> + std::to_string(t) +</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                            <span class="stringliteral">&quot; not within the domain [0,N]&quot;</span>);</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespaceplanner.html#a00dc2e45d34fb5441af4d23fbde47b62">point</a>(<a class="code" href="classplanner_1_1_baseframe.html#abddd2932d98540caa20145d913f04e9f">_x</a>(t), <a class="code" href="classplanner_1_1_baseframe.html#a4d7de20f3acc1c3e0e58edf972d1cec2">_y</a>(t));</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;}</div><div class="ttc" id="classplanner_1_1_baseframe_html_a4d7de20f3acc1c3e0e58edf972d1cec2"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a4d7de20f3acc1c3e0e58edf972d1cec2">planner::Baseframe::_y</a></div><div class="ttdeci">cubic_b_spline&lt; double &gt; _y</div><div class="ttdoc"> where  </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00407">baseframe.h:407</a></div></div>
<div class="ttc" id="classplanner_1_1_baseframe_html_abddd2932d98540caa20145d913f04e9f"><div class="ttname"><a href="classplanner_1_1_baseframe.html#abddd2932d98540caa20145d913f04e9f">planner::Baseframe::_x</a></div><div class="ttdeci">cubic_b_spline&lt; double &gt; _x</div><div class="ttdoc"> where  </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00399">baseframe.h:399</a></div></div>
<div class="ttc" id="classplanner_1_1_baseframe_html_a16b42ac15c7ddd7f5d30e1023b82c302"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a16b42ac15c7ddd7f5d30e1023b82c302">planner::Baseframe::_N</a></div><div class="ttdeci">int _N</div><div class="ttdoc">number of waypoints  </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00412">baseframe.h:412</a></div></div>
<div class="ttc" id="namespaceplanner_html_a00dc2e45d34fb5441af4d23fbde47b62"><div class="ttname"><a href="namespaceplanner.html#a00dc2e45d34fb5441af4d23fbde47b62">planner::point</a></div><div class="ttdeci">bg::model::d2::point_xy&lt; double &gt; point</div><div class="ttdef"><b>Definition:</b> <a href="typedefs_8h_source.html#l00013">typedefs.h:13</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a93d019a928c054500f47f73d1e4928f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceplanner.html#a00dc2e45d34fb5441af4d23fbde47b62">point</a> planner::Baseframe::Q_pprime </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The second derivative of <img class="formulaInl" alt="$Q(t)$" src="form_19.png"/> w.r.t. <img class="formulaInl" alt="$t$" src="form_0.png"/>. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classplanner_1_1_baseframe.html#aac6c7dd33fc9dbc2737c4e5d40316d1a" title="The second derivative of  w.r.t. . ">P_pprime</a>, <a class="el" href="classplanner_1_1_baseframe.html#a039ed89d4c15884ec6d4c1f5a8c28714" title="curvature of the baseframe at arc-length . ">curvature</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>where <img class="formulaInl" alt="$t \in [0,N]$" src="form_1.png"/> and <img class="formulaInl" alt="$N$" src="form_2.png"/> is the number of waypoints. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the second derivatives of x(t) and y(t) w.r.t. t. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::domain_error</td><td>if <img class="formulaInl" alt="$t \notin [0,N] $" src="form_17.png"/>.</td></tr>
  </table>
  </dd>
</dl>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[\frac{\mathrm{d}^2}{\mathrm{d}t^2}Q(t)=\left(\frac{\mathrm{d}^2}{\mathrm{d}t^2}x(t),\frac{\mathrm{d}^2}{\mathrm{d}^2t}y(t)\right) = (x''(t), y''(t))\]" src="form_21.png"/>
</p>
<p> where <img class="formulaInl" alt="$t \in [0,N]$" src="form_1.png"/> and <img class="formulaInl" alt="$N$" src="form_2.png"/> is the number of waypoints. The second derivate is computed by using the three point interpolation implemented in <a class="el" href="namespaceplanner.html#a98f98be859967206026fe06639064760">planner::derivative</a>. </p>

<p>Definition at line <a class="el" href="baseframe_8cc_source.html#l00075">75</a> of file <a class="el" href="baseframe_8cc_source.html">baseframe.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                                              {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> ddt_x =</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      <a class="code" href="namespaceplanner.html#a98f98be859967206026fe06639064760">derivative</a>(t, 0.001, [<span class="keyword">this</span>](<span class="keyword">const</span> <span class="keywordtype">double</span> t) { <span class="keywordflow">return</span> <a class="code" href="classplanner_1_1_baseframe.html#abddd2932d98540caa20145d913f04e9f">_x</a>.prime(t); });</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">double</span> ddt_y =</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      <a class="code" href="namespaceplanner.html#a98f98be859967206026fe06639064760">derivative</a>(t, 0.001, [<span class="keyword">this</span>](<span class="keyword">const</span> <span class="keywordtype">double</span> t) { <span class="keywordflow">return</span> <a class="code" href="classplanner_1_1_baseframe.html#a4d7de20f3acc1c3e0e58edf972d1cec2">_y</a>.prime(t); });</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespaceplanner.html#a00dc2e45d34fb5441af4d23fbde47b62">point</a>(ddt_x, ddt_y);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;}</div><div class="ttc" id="classplanner_1_1_baseframe_html_a4d7de20f3acc1c3e0e58edf972d1cec2"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a4d7de20f3acc1c3e0e58edf972d1cec2">planner::Baseframe::_y</a></div><div class="ttdeci">cubic_b_spline&lt; double &gt; _y</div><div class="ttdoc"> where  </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00407">baseframe.h:407</a></div></div>
<div class="ttc" id="classplanner_1_1_baseframe_html_abddd2932d98540caa20145d913f04e9f"><div class="ttname"><a href="classplanner_1_1_baseframe.html#abddd2932d98540caa20145d913f04e9f">planner::Baseframe::_x</a></div><div class="ttdeci">cubic_b_spline&lt; double &gt; _x</div><div class="ttdoc"> where  </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00399">baseframe.h:399</a></div></div>
<div class="ttc" id="namespaceplanner_html_a98f98be859967206026fe06639064760"><div class="ttname"><a href="namespaceplanner.html#a98f98be859967206026fe06639064760">planner::derivative</a></div><div class="ttdeci">const value_type derivative(const value_type x, const value_type dx, function_type func)</div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00028">baseframe.h:28</a></div></div>
<div class="ttc" id="namespaceplanner_html_a00dc2e45d34fb5441af4d23fbde47b62"><div class="ttname"><a href="namespaceplanner.html#a00dc2e45d34fb5441af4d23fbde47b62">planner::point</a></div><div class="ttdeci">bg::model::d2::point_xy&lt; double &gt; point</div><div class="ttdef"><b>Definition:</b> <a href="typedefs_8h_source.html#l00013">typedefs.h:13</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3d085b127b40ada6841708daeb21ee41"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceplanner.html#a00dc2e45d34fb5441af4d23fbde47b62">point</a> planner::Baseframe::Q_prime </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The first derivative of <img class="formulaInl" alt="$Q(t)$" src="form_19.png"/> w.r.t. <img class="formulaInl" alt="$t$" src="form_0.png"/>. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classplanner_1_1_baseframe.html#a840fab200ae5c89d66f3523899fa54cc" title="The first derivative of  w.r.t. . ">P_prime</a>, <a href="http://www.boost.org/doc/libs/1_65_1/libs/math/doc/html/math_toolkit/interpolate/cubic_b.html">boost::math::cubic_b_spline</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>where <img class="formulaInl" alt="$t \in [0,N]$" src="form_1.png"/> and <img class="formulaInl" alt="$N$" src="form_2.png"/> is the number of waypoints. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the first derivatives of x(t) and y(t) w.r.t. t. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::domain_error</td><td>if <img class="formulaInl" alt="$t \notin [0,N] $" src="form_17.png"/>.</td></tr>
  </table>
  </dd>
</dl>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[\frac{\mathrm{d}}{\mathrm{d}t}Q(t)=\left(\frac{\mathrm{d}}{\mathrm{d}t}x(t),\frac{\mathrm{d}}{\mathrm{d}t}y(t)\right) = (x'(t), y'(t)) \]" src="form_20.png"/>
</p>
<p>where <img class="formulaInl" alt="$t \in [0,N]$" src="form_1.png"/> and <img class="formulaInl" alt="$N$" src="form_2.png"/> is the number of waypoints. Thanks to <a href="http://www.boost.org/doc/libs/1_65_1/libs/math/doc/html/math_toolkit/interpolate/cubic_b.html">boost::math::cubic_b_spline</a> the derivates can be directly returned from the underlying datastructure. This is the tangent of <img class="formulaInl" alt="$Q(t)$" src="form_19.png"/> at <img class="formulaInl" alt="$t$" src="form_0.png"/>. </p>

<p>Definition at line <a class="el" href="baseframe_8cc_source.html#l00068">68</a> of file <a class="el" href="baseframe_8cc_source.html">baseframe.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                                             {</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keywordflow">if</span> (t &lt; 0 || t &gt; <a class="code" href="classplanner_1_1_baseframe.html#a16b42ac15c7ddd7f5d30e1023b82c302">_N</a>)</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">throw</span> std::domain_error(<span class="stringliteral">&quot;t = &quot;</span> + std::to_string(t) +</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                            <span class="stringliteral">&quot; not within the domain [0,N]&quot;</span>);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespaceplanner.html#a00dc2e45d34fb5441af4d23fbde47b62">point</a>(<a class="code" href="classplanner_1_1_baseframe.html#abddd2932d98540caa20145d913f04e9f">_x</a>.prime(t), <a class="code" href="classplanner_1_1_baseframe.html#a4d7de20f3acc1c3e0e58edf972d1cec2">_y</a>.prime(t));</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;}</div><div class="ttc" id="classplanner_1_1_baseframe_html_a4d7de20f3acc1c3e0e58edf972d1cec2"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a4d7de20f3acc1c3e0e58edf972d1cec2">planner::Baseframe::_y</a></div><div class="ttdeci">cubic_b_spline&lt; double &gt; _y</div><div class="ttdoc"> where  </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00407">baseframe.h:407</a></div></div>
<div class="ttc" id="classplanner_1_1_baseframe_html_abddd2932d98540caa20145d913f04e9f"><div class="ttname"><a href="classplanner_1_1_baseframe.html#abddd2932d98540caa20145d913f04e9f">planner::Baseframe::_x</a></div><div class="ttdeci">cubic_b_spline&lt; double &gt; _x</div><div class="ttdoc"> where  </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00399">baseframe.h:399</a></div></div>
<div class="ttc" id="classplanner_1_1_baseframe_html_a16b42ac15c7ddd7f5d30e1023b82c302"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a16b42ac15c7ddd7f5d30e1023b82c302">planner::Baseframe::_N</a></div><div class="ttdeci">int _N</div><div class="ttdoc">number of waypoints  </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00412">baseframe.h:412</a></div></div>
<div class="ttc" id="namespaceplanner_html_a00dc2e45d34fb5441af4d23fbde47b62"><div class="ttname"><a href="namespaceplanner.html#a00dc2e45d34fb5441af4d23fbde47b62">planner::point</a></div><div class="ttdeci">bg::model::d2::point_xy&lt; double &gt; point</div><div class="ttdef"><b>Definition:</b> <a href="typedefs_8h_source.html#l00013">typedefs.h:13</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2c85586deaa4a398270c9b570f83bb70"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double planner::Baseframe::theta </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>calculates the tangent angle in [rad] of baseframe at arc-length <img class="formulaInl" alt="$s$" src="form_3.png"/>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>where <img class="formulaInl" alt="$s \in [0,L]$" src="form_4.png"/> and <img class="formulaInl" alt="$L$" src="form_5.png"/> is the length of the baseframe in [m]. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classplanner_1_1_baseframe.html#a840fab200ae5c89d66f3523899fa54cc" title="The first derivative of  w.r.t. . ">P_prime</a>, <a class="el" href="classplanner_1_1_baseframe.html#a78fce391fe97e9fc0ad615fbfe929726" title="calculates the tangent angle in [rad] of baseframe at arc-length . ">theta_P</a>, <a class="el" href="classplanner_1_1_baseframe.html#a052d3a833cbcc586d53a93f9a2d92d2d" title="calculates the tangent angle in [rad] of baseframe at . ">theta_Q</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>the tangent angle in [rad] of baseframe at arc-length <img class="formulaInl" alt="$s$" src="form_3.png"/>. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::domain_error</td><td>if <img class="formulaInl" alt="$s \notin [0,L] $" src="form_6.png"/>.</td></tr>
  </table>
  </dd>
</dl>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[\tan(\theta) = \frac{y'}{x'} \rightarrow \theta = \mathrm{atan2}(y',x')\]" src="form_8.png"/>
</p>
<p>this can be derived from <img class="formulaInl" alt="$x' = \cos(\theta)$" src="form_9.png"/> and <img class="formulaInl" alt="$y' = \sin(\theta)$" src="form_10.png"/>. The use of atan2 gurantees the right sign of the angle.</p>
<p>this function is a name alias for theta_P. </p>

<p>Definition at line <a class="el" href="baseframe_8h_source.html#l00121">121</a> of file <a class="el" href="baseframe_8h_source.html">baseframe.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classplanner_1_1_baseframe.html#a78fce391fe97e9fc0ad615fbfe929726">theta_P</a>(s); }</div><div class="ttc" id="classplanner_1_1_baseframe_html_a78fce391fe97e9fc0ad615fbfe929726"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a78fce391fe97e9fc0ad615fbfe929726">planner::Baseframe::theta_P</a></div><div class="ttdeci">double theta_P(const double s) const </div><div class="ttdoc">calculates the tangent angle in [rad] of baseframe at arc-length . </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8h_source.html#l00322">baseframe.h:322</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a78fce391fe97e9fc0ad615fbfe929726"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double planner::Baseframe::theta_P </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>calculates the tangent angle in [rad] of baseframe at arc-length <img class="formulaInl" alt="$s$" src="form_3.png"/>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>where <img class="formulaInl" alt="$s \in [0,L]$" src="form_4.png"/> and <img class="formulaInl" alt="$L$" src="form_5.png"/> is the length of the baseframe in [m]. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classplanner_1_1_baseframe.html#a840fab200ae5c89d66f3523899fa54cc" title="The first derivative of  w.r.t. . ">P_prime</a>, <a class="el" href="classplanner_1_1_baseframe.html#a2c85586deaa4a398270c9b570f83bb70" title="calculates the tangent angle in [rad] of baseframe at arc-length . ">theta</a>, <a class="el" href="classplanner_1_1_baseframe.html#a052d3a833cbcc586d53a93f9a2d92d2d" title="calculates the tangent angle in [rad] of baseframe at . ">theta_Q</a>, <a class="el" href="classplanner_1_1_baseframe.html#a2aed76b6f967270b47d8bc3a56a2dccb" title=". ">inv_A</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>the tangent angle in [rad] of baseframe at arc-length <img class="formulaInl" alt="$s$" src="form_3.png"/>. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::domain_error</td><td>if <img class="formulaInl" alt="$s \notin [0,L] $" src="form_6.png"/>.</td></tr>
  </table>
  </dd>
</dl>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[\tan(\theta) = \frac{y'}{x'} \rightarrow \theta = \mathrm{atan2}(y',x')\]" src="form_8.png"/>
</p>
<p>this can be derived from <img class="formulaInl" alt="$x' = \cos(\theta)$" src="form_9.png"/> and <img class="formulaInl" alt="$y' = \sin(\theta)$" src="form_10.png"/>. The use of atan2 gurantees the right sign of the angle.</p>
<p>In this implementation the parameter domain is transformed to <img class="formulaInl" alt="$t$" src="form_0.png"/> and the tangent angle is calculated from <img class="formulaInl" alt="$Q(t)$" src="form_19.png"/>. </p>

<p>Definition at line <a class="el" href="baseframe_8h_source.html#l00322">322</a> of file <a class="el" href="baseframe_8h_source.html">baseframe.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classplanner_1_1_baseframe.html#a052d3a833cbcc586d53a93f9a2d92d2d">theta_Q</a>(<a class="code" href="classplanner_1_1_baseframe.html#a2aed76b6f967270b47d8bc3a56a2dccb">inv_A</a>(s)); }</div><div class="ttc" id="classplanner_1_1_baseframe_html_a052d3a833cbcc586d53a93f9a2d92d2d"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a052d3a833cbcc586d53a93f9a2d92d2d">planner::Baseframe::theta_Q</a></div><div class="ttdeci">double theta_Q(const double t) const </div><div class="ttdoc">calculates the tangent angle in [rad] of baseframe at . </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8cc_source.html#l00083">baseframe.cc:83</a></div></div>
<div class="ttc" id="classplanner_1_1_baseframe_html_a2aed76b6f967270b47d8bc3a56a2dccb"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a2aed76b6f967270b47d8bc3a56a2dccb">planner::Baseframe::inv_A</a></div><div class="ttdeci">double inv_A(const double s) const </div><div class="ttdoc">. </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8cc_source.html#l00114">baseframe.cc:114</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a052d3a833cbcc586d53a93f9a2d92d2d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double planner::Baseframe::theta_Q </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>calculates the tangent angle in [rad] of baseframe at <img class="formulaInl" alt="$t$" src="form_0.png"/>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>where <img class="formulaInl" alt="$t \in [0,N]$" src="form_1.png"/> and <img class="formulaInl" alt="$N$" src="form_2.png"/> is the number of waypoints. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classplanner_1_1_baseframe.html#a3d085b127b40ada6841708daeb21ee41" title="The first derivative of  w.r.t. . ">Q_prime</a>, <a class="el" href="classplanner_1_1_baseframe.html#a93d019a928c054500f47f73d1e4928f4" title="The second derivative of  w.r.t. . ">Q_pprime</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>the tangent angle in [rad] of baseframe at arc-length <img class="formulaInl" alt="$s$" src="form_3.png"/>. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::domain_error</td><td>if <img class="formulaInl" alt="$t \notin [0,N] $" src="form_17.png"/>.</td></tr>
  </table>
  </dd>
</dl>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[\tan(\theta) = \frac{y'}{x'} \rightarrow \theta = \mathrm{atan2}(y',x')\]" src="form_8.png"/>
</p>
<p>this can be derived from <img class="formulaInl" alt="$x' = \cos(\theta)$" src="form_9.png"/> and <img class="formulaInl" alt="$y' = \sin(\theta)$" src="form_10.png"/>. The use of atan2 gurantees the right sign of the angle. </p>

<p>Definition at line <a class="el" href="baseframe_8cc_source.html#l00083">83</a> of file <a class="el" href="baseframe_8cc_source.html">baseframe.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                                              {</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keyword">auto</span> p = <a class="code" href="classplanner_1_1_baseframe.html#a3d085b127b40ada6841708daeb21ee41">Q_prime</a>(t);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="comment">// return atan2(p.y(), p.x());</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keywordflow">return</span> atan(p.y() / p.x());</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div><div class="ttc" id="classplanner_1_1_baseframe_html_a3d085b127b40ada6841708daeb21ee41"><div class="ttname"><a href="classplanner_1_1_baseframe.html#a3d085b127b40ada6841708daeb21ee41">planner::Baseframe::Q_prime</a></div><div class="ttdeci">point Q_prime(const double t) const </div><div class="ttdoc">The first derivative of  w.r.t. . </div><div class="ttdef"><b>Definition:</b> <a href="baseframe_8cc_source.html#l00068">baseframe.cc:68</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a16b42ac15c7ddd7f5d30e1023b82c302"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int planner::Baseframe::_N</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>number of waypoints <img class="formulaInl" alt="$N$" src="form_2.png"/> </p>

<p>Definition at line <a class="el" href="baseframe_8h_source.html#l00412">412</a> of file <a class="el" href="baseframe_8h_source.html">baseframe.h</a>.</p>

</div>
</div>
<a class="anchor" id="abddd2932d98540caa20145d913f04e9f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cubic_b_spline&lt;double&gt; planner::Baseframe::_x</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><img class="formulaInl" alt="$x(t)$" src="form_30.png"/> where <img class="formulaInl" alt="$t \in [0,N]$" src="form_1.png"/> </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classplanner_1_1_baseframe.html#a8804b52cdfa7d51f984299866a496c97" title="2D-cubic-B-spline parametrized by t. ">Q</a>, <a href="http://www.boost.org/doc/libs/1_65_1/libs/math/doc/html/math_toolkit/interpolate/cubic_b.html.">boost::math::cubic_b_spline</a></dd></dl>
<p><img class="formulaInl" alt="$x(t)$" src="form_30.png"/> in function <img class="formulaInl" alt="$Q(t) = (x(t), y(t))$" src="form_31.png"/> </p>

<p>Definition at line <a class="el" href="baseframe_8h_source.html#l00399">399</a> of file <a class="el" href="baseframe_8h_source.html">baseframe.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4d7de20f3acc1c3e0e58edf972d1cec2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cubic_b_spline&lt;double&gt; planner::Baseframe::_y</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><img class="formulaInl" alt="$y(t)$" src="form_32.png"/> where <img class="formulaInl" alt="$t \in [0,N]$" src="form_1.png"/> </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classplanner_1_1_baseframe.html#a8804b52cdfa7d51f984299866a496c97" title="2D-cubic-B-spline parametrized by t. ">Q</a>, <a href="http://www.boost.org/doc/libs/1_65_1/libs/math/doc/html/math_toolkit/interpolate/cubic_b.html.">boost::math::cubic_b_spline</a></dd></dl>
<p><img class="formulaInl" alt="$y(t)$" src="form_32.png"/> in function <img class="formulaInl" alt="$Q(t) = (x(t), y(t))$" src="form_31.png"/> </p>

<p>Definition at line <a class="el" href="baseframe_8h_source.html#l00407">407</a> of file <a class="el" href="baseframe_8h_source.html">baseframe.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/planner/<a class="el" href="baseframe_8h_source.html">baseframe.h</a></li>
<li>src/planner/<a class="el" href="baseframe_8cc_source.html">baseframe.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
